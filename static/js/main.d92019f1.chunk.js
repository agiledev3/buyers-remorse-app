(this["webpackJsonpbuyers-remorse-app"]=this["webpackJsonpbuyers-remorse-app"]||[]).push([[0],{33:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(21),s=a.n(n),i=a(7),o=a(37),l=a(34),u=a(22),d=a(38),j=a(35),h={HOME:"Home",EDIT_PRODUCT:"EDIT_PRODUCT"},b=a(1);var m=function(e){var t=e.product,a=t.id,r=t.name,c=t.daysLeft,n=t.likeCount;return Object(b.jsxs)(o.a,{className:"p-3",id:a,children:[Object(b.jsx)(o.a.Title,{children:r}),Object(b.jsxs)(l.a,{children:[Object(b.jsx)(u.a,{children:0===c?Object(b.jsxs)(d.a,{variant:"btn btn-outline-success",className:"px-3",children:[Object(b.jsx)("i",{className:"fas fa-minus-circle"})," Forget"]}):Object(b.jsxs)("span",{children:[Object(b.jsx)("i",{className:"far fa-clock"})," ",c," days left"]})}),Object(b.jsxs)(u.a,{className:"text-right",children:[Object(b.jsx)(d.a,{variant:"outline-secondary",title:"Edit product",onClick:function(){e.changePage(h.EDIT_PRODUCT),e.setCurrentProduct(e.product)},children:Object(b.jsx)("i",{className:"fas fa-pen"})}),Object(b.jsxs)(d.a,{variant:"success",style:{paddingLeft:"0.55em",paddingRight:"0.2em",marginLeft:"0.3em"},children:[Object(b.jsx)("i",{className:"fas fa-thumbs-up"}),Object(b.jsx)("sup",{children:Object(b.jsx)(j.a,{variant:"light",children:n})})]})]})]})]},a)};var O=function(e){return Object(b.jsxs)("div",{children:[Object(b.jsx)(o.a,{className:"p-2",children:Object(b.jsxs)(o.a.Title,{className:"text-center",children:[Object(b.jsxs)(l.a,{children:[Object(b.jsx)(u.a,{sm:{span:2}}),Object(b.jsx)(u.a,{sm:{span:8},children:"Buyer's regret"}),Object(b.jsx)(u.a,{sm:{span:2},style:{fontSize:"2em"},children:Object(b.jsx)("i",{className:"far fa-user-circle align-middle"})})]}),Object(b.jsxs)(l.a,{children:[Object(b.jsx)(u.a,{sm:{span:2}}),Object(b.jsx)(u.a,{sm:{span:8},children:"My wishlist"}),Object(b.jsx)(u.a,{sm:{span:2}})]})]})}),e.allProducts.map((function(t){return Object(b.jsx)(m,{product:t,changePage:e.changePage,setCurrentProduct:e.setCurrentProduct},t.id)})),Object(b.jsx)(d.a,{variant:"primary",className:"float-right my-3",title:"Add new product",onClick:function(){e.changePage(h.EDIT_PRODUCT)},children:Object(b.jsx)("i",{className:"fas fa-plus"})})]})},x=function(e){return Object(b.jsx)(O,{allProducts:e.allProducts,changePage:e.changePage,setCurrentProduct:e.setCurrentProduct})},g=a(11),p=a(15),f=function(e){var t=e||{name:"",linkToBuy:"",reasonToBuy:"",reminderPeriod:7,coolingPeriod:30},a=Object(r.useState)(t),c=Object(i.a)(a,2),n=c[0],s=c[1];return{handleChange:function(e){var t=e.target,a=t.name,r=t.value;s(Object(p.a)(Object(p.a)({},n),{},Object(g.a)({},a,r)))},handleReset:function(){s(Object(p.a)({},t))},product:n}},P=a(36),y=function(e){var t=f(e.product),a=t.handleChange,r=t.handleReset,n=t.product,s=function(){r(),e.changePage(h.HOME),e.setCurrentProduct(null)};return Object(b.jsxs)(c.a.Fragment,{children:[Object(b.jsx)(o.a,{className:"my-2",children:Object(b.jsxs)(o.a.Title,{className:"text-center",children:[Object(b.jsxs)(l.a,{className:"p-1",children:[Object(b.jsx)(u.a,{xs:{span:2},style:{fontSize:"2em"},children:Object(b.jsx)(d.a,{variant:"outline-dark",size:"lg",onClick:s,children:Object(b.jsx)("i",{className:"fas fa-chevron-left align-center"})})}),Object(b.jsx)(u.a,{xs:{span:8},children:"Buyer's regret"}),Object(b.jsx)(u.a,{xs:{span:2},style:{fontSize:"2em"},children:Object(b.jsx)("i",{className:"far fa-user-circle align-middle"})})]}),Object(b.jsxs)(l.a,{children:[Object(b.jsx)(u.a,{sm:{span:2}}),Object(b.jsx)(u.a,{sm:{span:8},children:"Product Details"}),Object(b.jsx)(u.a,{sm:{span:2}})]})]})}),Object(b.jsxs)(P.a,{className:"product-form",onSubmit:function(t){t.preventDefault(),n.id?e.updateProduct(n.id,n):e.createProduct(n),e.changePage(h.HOME),e.setCurrentProduct(null)},children:[Object(b.jsxs)(P.a.Group,{children:[Object(b.jsx)(P.a.Label,{htmlFor:"name",children:"Product name:"}),Object(b.jsx)(P.a.Control,{onChange:a,value:n.name,placeholder:"Product name ...",name:"name",id:"name","data-testid":"name",required:!0})]}),Object(b.jsxs)(P.a.Group,{children:[Object(b.jsx)(P.a.Label,{htmlFor:"linkToBuy",children:"Link to buy:"}),Object(b.jsx)(P.a.Control,{onChange:a,value:n.linkToBuy,placeholder:"Link to a website ...",name:"linkToBuy",id:"linkToBuy"})]}),Object(b.jsxs)(P.a.Group,{children:[Object(b.jsx)(P.a.Label,{htmlFor:"reasonToBuy",children:"Why would you like to buy this product?"}),Object(b.jsx)(P.a.Control,{onChange:a,value:n.reasonToBuy,placeholder:"Reason to buy ...",name:"reasonToBuy",id:"reasonToBuy",as:"textarea",rows:"3",required:!0})]}),Object(b.jsxs)(P.a.Row,{children:[Object(b.jsxs)(P.a.Group,{as:u.a,xs:"auto",children:[Object(b.jsx)(P.a.Label,{htmlFor:"reminderPeriod",children:"How long should I wait before I remind you about this product?"}),Object(b.jsx)(P.a.Control,{onChange:a,value:n.reminderPeriod,placeholder:"Days ...",name:"reminderPeriod",id:"reminderPeriod",type:"number",min:"1",max:"30",style:{maxWidth:"5rem"}})]}),Object(b.jsx)(u.a,{lg:"2"}),Object(b.jsxs)(P.a.Group,{as:u.a,xs:"auto",children:[Object(b.jsx)(P.a.Label,{htmlFor:"coolingPeriod",children:"How long should I lock the buy button?"}),Object(b.jsx)(P.a.Control,{onChange:a,value:n.coolingPeriod,placeholder:"Days ...",name:"coolingPeriod",id:"coolingPeriod",type:"number",min:"1",max:"90",style:{maxWidth:"5rem"}})]})]}),Object(b.jsxs)(P.a.Row,{children:[Object(b.jsx)(u.a,{children:Object(b.jsx)(d.a,{variant:"outline-danger",aligned:"left aligned",size:"lg",onClick:s,children:Object(b.jsx)("i",{className:"fas fa-times-circle"})})}),Object(b.jsx)(u.a,{xs:"auto",children:Object(b.jsx)(d.a,{variant:"outline-success",aligned:"right aligned",type:"submit",size:"lg",title:"Save product",children:Object(b.jsx)("i",{className:"fas fa-check"})})})]})]})]})},v=function(e){var t=Object(r.useState)(h.HOME),a=Object(i.a)(t,2),c=a[0],n=a[1];return Object(b.jsxs)(r.Fragment,{children:[c===h.HOME&&Object(b.jsx)(x,{allProducts:e.allProducts,setCurrentProduct:e.setCurrentProduct,changePage:n}),c===h.EDIT_PRODUCT&&Object(b.jsx)(y,{product:e.currentProduct,setCurrentProduct:e.setCurrentProduct,changePage:n,createProduct:e.createProduct,updateProduct:e.updateProduct})]})},C=a(12),T=a(13),k=a(14),S=(a(8),{read:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):[]},write:function(e,t,a){var r=this.read(e);a?r=r.filter((function(e){return e.id!==a})):t.id=this.calculateNextId(r),r.push(t),localStorage.setItem(e,JSON.stringify(r))},calculateNextId:function(e){return e&&0!==e.length?Math.max.apply(Math,Object(k.a)(e.map((function(e){return e.id}))))+1:1}}),w=function(){function e(t,a){var r=this;Object(C.a)(this,e),this._calculateDaysLeft=function(e,t){var a=r.dateService.getCurrent().getTime(),c=(Date.parse(e)+t*r.dateService.msInDay()-a)/r.dateService.msInDay();return c>1?Math.floor(c):0},this.dataSource=t,this.dateService=a}return Object(T.a)(e,[{key:"getAll",value:function(){var e=this,t=this._readProductsFromSource();return t.forEach((function(t){t.daysLeft=e._calculateDaysLeft(t.createdAt,t.coolingPeriod)})),t}},{key:"update",value:function(e,t){this._writeProductToSource(e,t)}},{key:"create",value:function(e){e.likeCount=0,e.createdAt=(new Date).toISOString(),e.daysLeft=e.coolingPeriod,this._writeProductToSource(null,e)}},{key:"remove",value:function(e){}},{key:"_readProductsFromSource",value:function(){return this.dataSource.read("products")}},{key:"_writeProductToSource",value:function(e,t){return this.dataSource.write("products",t,e)}}]),e}(),D=function(){function e(){Object(C.a)(this,e)}return Object(T.a)(e,[{key:"getCurrent",value:function(){return new Date}},{key:"msInDay",value:function(){return 864e5}}]),e}(),N=a(23),B=(a(32),new w(S,new D));function I(){var e=Object(r.useState)(B.getAll()),t=Object(i.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)(null),s=Object(i.a)(n,2),o=s[0],l=s[1];return Object(b.jsx)(N.a,{children:Object(b.jsx)("header",{children:Object(b.jsx)(v,{pages:I.pages,allProducts:a,createProduct:function(e){B.create.bind(B)(e),c(B.getAll())},updateProduct:function(e,t){B.update.bind(B)(e,t),c(B.getAll())},setCurrentProduct:l,currentProduct:o})})})}I.pages={HOME:"HOME",EDIT_PRODUCT:"EDIT_PRODUCT"};var E=I,L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,39)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),r(e),c(e),n(e),s(e)}))};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(E,{})}),document.getElementById("root")),L()},8:function(e){e.exports=JSON.parse('{"products":[{"id":1,"name":"First product","likeCount":3,"linkToBuy":"www.lorem.ipsum","reasonToBuy":"dolor","reminderPeriod":7,"coolingPeriod":30,"createdAt":"2021-01-01T18:00:00.000Z"},{"id":2,"name":"Second product","likeCount":1,"linkToBuy":"www.lorem.ipsum","reasonToBuy":"dolor","reminderPeriod":7,"coolingPeriod":30,"createdAt":"2021-01-10T18:00:00.000Z"},{"id":3,"name":"Third product","likeCount":5,"linkToBuy":"www.lorem.ipsum","reasonToBuy":"dolor","reminderPeriod":7,"coolingPeriod":30,"createdAt":"2021-02-14T18:00:00.000Z"}]}')}},[[33,1,2]]]);
//# sourceMappingURL=main.d92019f1.chunk.js.map